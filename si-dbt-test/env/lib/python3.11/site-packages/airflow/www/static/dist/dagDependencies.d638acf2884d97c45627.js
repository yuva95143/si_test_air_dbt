/*! For license information please see dagDependencies.d638acf2884d97c45627.js.LICENSE.txt */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Airflow=t():(e.Airflow=e.Airflow||{},e.Airflow.dagDependencies=t())}(self,(()=>(()=>{const e="#000000",t="#2020A0",l="#0000FF",s="3px",n="5px",o=500;let r=dagNodes;const d=r,a=r.filter((e=>edges.some((t=>t.u===e.id||t.v===e.id))));let c=(new dagreD3.graphlib.Graph).setGraph({nodesep:15,ranksep:15,rankdir:arrange}).setDefaultEdgeLabel((()=>({lineInterpolate:"basis"})));const i=dagreD3.render(),g=d3.select("#graph-svg"),h=d3.select("#graph-svg g");function u(e,t,l){e.forEach((e=>{const s=c.node(e).elem;d3.select(s).selectAll("rect,circle").style("stroke",t).style("stroke-width",l)}))}let f=null;d3.select("#searchbox").on("keyup",(()=>{!function(e){let t=null;if(d3.selectAll("g.nodes g.node").filter((function(l){var r;return""===e?(d3.select("g.edgePaths").transition().duration(o).style("opacity",1),d3.select(this).transition().duration(o).style("opacity",1).selectAll("rect").style("stroke-width",s)):(d3.select("g.edgePaths").transition().duration(o).style("opacity",.2),r=e,l.indexOf(r)>-1?(t||(t=this),d3.select(this).transition().duration(o).style("opacity",1).selectAll("rect").style("stroke-width",n)):d3.select(this).transition().style("opacity",.2).duration(o).selectAll("rect").style("stroke-width",s)),null})),t){const e=d3.transform(d3.select(t).attr("transform")),l=g.node().getBoundingClientRect();e.translate=[l.width/2-e.translate[0],l.height/2-e.translate[1]],e.scale=[1,1],null!==f&&(f.translate(e.translate),f.scale(1),f.event(h))}}(document.getElementById("searchbox").value)}));const p=()=>{c=(new dagreD3.graphlib.Graph).setGraph({nodesep:15,ranksep:15,rankdir:arrange}).setDefaultEdgeLabel((()=>({lineInterpolate:"basis"}))),r.forEach((e=>{c.setNode(e.id,e.value)}));edges.filter((e=>2===r.filter((t=>t.id===e.u||t.id===e.v)).length)).forEach((e=>{c.setEdge(e.u,e.v,{curve:d3.curveBasis,arrowheadClass:"arrowhead"})})),h.call(i,c),function(){let o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;d3.selectAll("g.node").on("mouseover",(function(s){d3.select(this).selectAll("rect").style("stroke",e),u(c.predecessors(s),t,n),u(c.successors(s),l,n);const o=[s,...c.predecessors(s),...c.successors(s)];d3.selectAll("g.nodes g.node").filter((e=>!o.includes(e))).style("opacity",.2);const r=c.nodeEdges(s);d3.selectAll("g.edgePath")[0].filter((e=>!r.includes(e.__data__))).forEach((e=>{d3.select(e).style("opacity",.2)}))})),d3.selectAll("g.node").on("mouseout",(function(e){d3.select(this).selectAll("rect,circle").style("stroke",null),u(c.predecessors(e),null,s),u(c.successors(e),null,s),d3.selectAll("g.node").style("opacity",1),d3.selectAll("g.node rect").style("stroke-width",s),d3.selectAll("g.edgePath").style("opacity",1),o&&localStorage.removeItem(o)}))}(),function(){f=d3.behavior.zoom().on("zoom",(()=>{h.attr("transform",`translate(${d3.event.translate})scale(${d3.event.scale})`)})),g.call(f);const e=c.graph().width,t=c.graph().height,l=g.node().getBoundingClientRect(),s=l.width-40,n=l.height-20,o=Math.min(Math.min(s/e,n/t),1.5);f.translate([s/2-e*o/2+20,20]),f.scale(o),f.event(h)}(),c.nodes().forEach((e=>{const t=c.node(e);"dag"===t.class&&d3.select(t.elem).on("click",(()=>{window.location.href=`/dags/${t.label}/grid?tab=graph`}))}))};return document.getElementById("deps-filter").addEventListener("change",(function(){document.getElementById("searchbox").value="",r=this.checked?a:d,p()})),document.getElementById("deps-filter").checked&&(r=a),p(),{}})()));